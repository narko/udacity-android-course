{"version":3,"sources":["database/src/database/core/stats/StatsManager.ts","database/core/stats/StatsManager.js"],"names":["StatsManager","getCollection","repoInfo","hashString","toString","collections_","getOrCreateReporter","creatorFunction","reporters_"],"mappings":";;;;;;;AAgBA;;AAGA,IAAAA,eAAA,YAAA;AAAA,aAAAA,YAAA,GAAA,CAuBC;AAnBQA,iBAAAC,aAAA,GAAP,UAAqBC,QAArB,EAAuC;AACrC,YAAMC,aAAaD,SAASE,QAAT,EAAnB;AAEA,YAAI,CAAC,KAAKC,YAAL,CAAkBF,UAAlB,CAAL,EAAoC;AAClC,iBAAKE,YAAL,CAAkBF,UAAlB,IAAgC,sCAAhC;AACD;AAED,eAAO,KAAKE,YAAL,CAAkBF,UAAlB,CAAP;AACD,KARM;AAUAH,iBAAAM,mBAAA,GAAP,UAA8BJ,QAA9B,EAAkDK,eAAlD,EAA0E;AACxE,YAAMJ,aAAaD,SAASE,QAAT,EAAnB;AAEA,YAAI,CAAC,KAAKI,UAAL,CAAgBL,UAAhB,CAAL,EAAkC;AAChC,iBAAKK,UAAL,CAAgBL,UAAhB,IAA8BI,iBAA9B;AACD;AAED,eAAO,KAAKC,UAAL,CAAgBL,UAAhB,CAAP;AACD,KARM;AAST,WAAAH,YAAA;AAvBA,CAAA,EAAA,C,CAnBA;;;;;;;;;;;;;;;QCmCSA,Y,GAAAA,Y;;ADfQA,aAAAK,YAAA,GAAiD,EAAjD;AACAL,aAAAQ,UAAA,GAAmC,EAAnC","file":"StatsManager.js","sourcesContent":["/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\nimport { StatsCollection } from './StatsCollection';\nimport { RepoInfo } from '../RepoInfo';\n\nexport class StatsManager {\n  private static collections_: { [k: string]: StatsCollection } = {};\n  private static reporters_: { [k: string]: any } = {};\n\n  static getCollection(repoInfo: RepoInfo): StatsCollection {\n    const hashString = repoInfo.toString();\n\n    if (!this.collections_[hashString]) {\n      this.collections_[hashString] = new StatsCollection();\n    }\n\n    return this.collections_[hashString];\n  }\n\n  static getOrCreateReporter<T>(repoInfo: RepoInfo, creatorFunction: () => T): T {\n    const hashString = repoInfo.toString();\n\n    if (!this.reporters_[hashString]) {\n      this.reporters_[hashString] = creatorFunction();\n    }\n\n    return this.reporters_[hashString];\n  }\n}\n","/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\nimport { StatsCollection } from './StatsCollection';\nvar StatsManager = (function () {\n    function StatsManager() {\n    }\n    StatsManager.getCollection = function (repoInfo) {\n        var hashString = repoInfo.toString();\n        if (!this.collections_[hashString]) {\n            this.collections_[hashString] = new StatsCollection();\n        }\n        return this.collections_[hashString];\n    };\n    StatsManager.getOrCreateReporter = function (repoInfo, creatorFunction) {\n        var hashString = repoInfo.toString();\n        if (!this.reporters_[hashString]) {\n            this.reporters_[hashString] = creatorFunction();\n        }\n        return this.reporters_[hashString];\n    };\n    return StatsManager;\n}());\nexport { StatsManager };\nStatsManager.collections_ = {};\nStatsManager.reporters_ = {};\n\n\n"]}